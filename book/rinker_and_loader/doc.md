#リンカ・ローダ実践開発テクニック
#2019/07/10-2019/08/9

#chapter 1

P14 
	アセンブリ言語 システムコール呼び出し c言語から
--- 
P14 
	リンク スタートアップルーチン (ctr1.o ctri.o, crtbegin.o, crtend.o crtn.o)
---
P14 
	リンクとは 機械語 osに依存する実行形式
---
P17 
	BSS領域 実行ファイルのサイズに含まれない サイズ情報のみ 
---
P18
	exec() 実行形式ヘッダ どのように展開実行
---
P25
	オブジェクトファイル シンボルテーブル シンボル名管理
---
P26
	メモリの固定アドレス リンク時 未解決シンボル
---
P27
	リンカの動作 シンボルテーブル 再配置エントリ
	>1 実態にアドレス割当
	>2 シンボルテーブルにアドレス設定(0x00000はアドレスが割り当てられていない) -> P123
	>3 再配置エントリを参照して呼び出している箇所にアドレス補充
---
P29
	stripe シンボルテーブル 削除
---
P30
	ローダ仕事 セクション 開始位置 execve()
---
P33
	リンカスクリプト セクション配置 開始位置 
---

#chapter 2
P33 P50
	リンカ単位 ローダ単位 
---
P33
	実行ファイル オブジェクトファイル Dynamic Link プログラムヘッダ
---
P43
	ABI API OS
---
P43 ???
	機械語コードをそのまま実行できても、システムコールの呼び出し方法がことなる
---
P43 ???
	APIは同じだがABIは異なるの意味がよく分からん
---
P43
	elf プラットフォームの定義 brandelf
---
P51
	複数セクション 1つのセクションまとめる リンカスクリプト
---
P51
	rel.text  rela.XXXX
---
P59
	実態がないのにも関わらずシンボルテーブル 再配置テーブルから

#chaper 3

P69
	アーカイブシンボルテーブル どのオブジェクトファイルか
---
P83
	GPU ld ファイル単位 
---
P83
	GPU ld オブジェクトファイル アーカイブファイル
---

#chaper 4

P88
	配列とポインタの違い 配列の実体とシンボル名 演算
---
P97
	変数アドレス割当 最終リング時 一斉
--
P101
>	静的ライブラリは実際には複数のオブジェクトファイルをまとめてもっているだけ
---
P101
	同じライブラリアーカイブないだとしても、もともと別オブジェクトだったものからはリンクできない
---
P101
	変数の隠蔽 オブジェクトファイル単位 オブジェクトファイルまとめる
---
P103 P107
	グローバル変数初期化 データ領域 ロード
---
P103 P107
	BSS領域 ロード時 0クリア ローダ依存
---
P109
	スタートアップルーチン 起動時自動的に関数呼び出し __attribute__
---
P111
	ctors 関数呼び出し順 末尾 辞書順
---
P114
	return  exit() 違い

#chaper 5

P120
	プログラムヘッダ セグメント セクションヘッダ セクション
---
P124
	.textセクション	0 関数定義
---
P124
	実行形式になぜセクションがあるか
---
P127
	リンカスクリプト 役割 5
---
P130
	セクション どのようにマップされたか リンクマップ
---
P131
	セグメントのサイズ ロード先のサイズ なぜ違う場合が存在
---
P132
	Algn 2**2 バイトアラインメント
---
P133  ???
	実行ファイルをロードするアドレス先はどうやって決まるのか->どのみち仮想アドレスなんだからなんでもいいきがする
---

#chaper 6
P136
	.textセクション rw メモリ保護機能
---
P143
	リンカスクリプトにおけるシンボルを作成するということは
---
P145 P146
	シンボル名 リンカスクリプト優先 バグ _
---
P152
	リンク VMAを基準 
---

#chaper 7
P154
	ファイルの順番 マッピングの順番 ヒット率
---
P154
	ライブラリに依存関係がある場合は参照する側を参照される側よりも先に書く必要がある
	> 必要不要の判断はコマンドラインに指定された順番に処理される必要がある
---
P157 P158
	相互参照 どのような順番でもエラー ライブラリアーカイブ まとめる 重複指定
---
P158
	multiple definition --start-group --end-group 
---
P159
	重複シンボル問題 オブジェクトフィアル ライブラリ・アーカイブ
---
P161
	実際には参照される側のライブラリアーカイブよりも先に参照するものが一つでも存在すればよい
---
P162
	ライブラリリンクする順番を入れ替えただけでエラー インターポジショニング --warn-common
---
P164
	セクション内容を出力 __start_() __end()__
---	
167
	vmlinuxのリンカスクリプトはプラットフォーム固有のものではなくアーキテクチャ固有のものが利用できる
---
170
	結合型の実行形式の作成

#chapter 8
P174
	exec()は新しいプログラムを現在のプロセス上にロードして実行するため呼び出し側のプログラムは消えてしまいます
---
P179
	-static GPU ld
---
P180
	x86アーキテクチャ i386
---

#chapter 10
P210
	リンカ 大まかな仕事 2つ
---
P211
	シンボル名の解決方法はCPU依存
---

#chapter 11

P252
	アドレスはリンカが実行形式を作成する際に決定すため、ロードされるアドレスは一意に決まっている
---
P253
	アドレスは一定のサイズ単位で変換 
---	
P253
	アプリケーションはメインメモリの空いている領域にページ単位でロードされて実行される
---	
P255
	アプリケーション起動時 マッピング情報生成 mmap()
---
P255
	ページフォールト 必要に応じてロード
---
P257
	複数のアプリケーション起動 テキスト領域 共有
---
P259
	動的ライブラリ=共有ライブラリではない
---
P259
	共有ライブラリはどのアドレスにローダされるかの保証はない
---
P260
	GOT PLT 遅延リンク
---
P263
	実行形式の起動時には実行形式中に含まれている情報を読み、実行に必要なライブラリを-rpathを含めたディレクトリから検索し、ロード
---
P263
	リンクの時点ではlibXXX.so 実行時はlibXXX.so.X
---
P263
	共有ライブラリ 検索キャッシュ ldconfifg -m
---
P264
	共有ライブラリ 静的ライブラリ 優先度
---
P271
	-fpic -shared
---
P287
	動的リンカ 3 .interp
---
P292
	LD_BIND_NOW
---
P296
	共有ライブラリの明示的なロード __wrap_malloc malloc2
---
